<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
			<meta charset="utf-8"></meta>
			<title>Job</title>

			<script type="text/javascript" src="js/jquery.js"></script>
			<script type="text/javascript" src="js/bootstrap.js"></script>

			<link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
			<link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.css"/>
			<link rel="stylesheet" type="text/css" href="css/principal.css"/>
			
			<script type="text/javascript">
			/*this code is to hide the td  active class ,and this is used to verify if there is inactive on display ,
			  with true this code will change the checkbox as checked */
			$( document ).ready(function() {
					
					$( 'td.active' ).each(function( index ){
						$( this ).hide(1);
						
						if( $( this ).text() == 1 ) {
							$( '#isInactive' ).prop( 'checked' , true );
						}
						
					});
					
				
				});
			
			
			/* this code is to make  on server a solicitation of datas with inactives  */
			$( document ).ready(function(){ 
				$( '#isInactive' ).click( function() {
					  if ($( this ).is( ':checked' )) {
						   	window.location.href = 'JobInactive';
				        }else{
				        	window.location.href = 'Job';
				        }
				  });
			});
			
			/* this code is filter results and display just the results that is equals typed by user , 
			   otherwise the content will be hidden */ 
					$(document).ready(function(){
					  $("input").keyup(function(){
						  	var x = $( "input[name=search]" ).val();
							var x = x.toLowerCase()
						
					     	$('tr.job').each(function( index ) {
					     			if(x == ""){
					     				$(this).show();
					     			}
					     			var title = $( this ).parent().find("td.title")[index].innerHTML;
					     			title = title.toLowerCase();
					     			
					     			var id = $( this ).parent().find("td.id")[index].innerHTML;
					     			id = id.toLowerCase();
					     		    if(title.substring(0 ,x.length ) == x || id.substring(0 ,x.length) == x){
					     		    	
					     		    }else{
					     		    	$(this).hide(500);
					     		    	
					     		    
					     		    }
					     		
					     	});;
	
					  });
					});
		
			</script>
			
		</head>
		<body>

	<div th:include="NavMain :: navMain"></div>
	<div th:include="Modals :: jobGuide"></div>



		<div id="employee_list">
			<section>
				<br/>
				<div class="container-fluid">
					<div class="row-fluid">
						<fieldset>
							
								 <form class="navbar-search pull-left" >
									  	<legend>
									  		<ul class="legenda">
									  			<li>
									  				Jobs
									  			</li>
									  			<li class="legenda_search">
									  				<input type="text" class="search-query" name="search" placeholder="Search"  style="width: 200px; heigth:30px;" />
									  			</li>
									  			<li>
										<label>
											<input type="checkbox" id="isInactive" /> 
											Include Removed Jobs
										</label>
									</li>
									  			<li id ="buttons_position">
									  			<ul>
									  			<li>
									  				<a href="JobRegistration"><button type="button">
									  					<i class="icon-plus"></i><font size="1" color="#555"> Add Job</font>
									  				</button></a>
									  			</li>
									  			<li class="dropdown">
									  				<a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">
									  					<button type="button">
									  						<img src="img/tres-barras.png" style="width: 30px; heigth:40px;"/>
									  					</button>
									  				</a>
									  				<ul class="dropdown-menu">
											<li><a href="mainPage"><font size="2" color="#555"><i
														class="icon-home"></i> Back to Main Page</font></a></li>
																						<li><a href="#ModalJG" data-toggle="modal"><font
														size="2" color="#555"><i class="icon-question-sign"></i>
															Job guide</font></a></li>
													</ul>
									  				
									  			</li>
									  			</ul>
									  			</li>
									  		</ul>
									  	</legend>
									</form>
									</fieldset>
									
						    	 <table class="table table-bordered">
				  					<tr style="background-color:#00339f; border: 0px solid #00339f;">
				  						<td>
				  							<center><font size="3" color="#fff">Job Id</font></center>
				  						</td>
				  						<td>
				  							<center><font size="3" color="#fff">Job Description</font></center>
				  						</td>
				  						<td>
				  							<center><font size="3" color="#fff">Hierarchy</font></center>
				  						</td>
				  						<td>
				  							<center><font size="3" color="#fff">Edit</font></center>
				  						</td>
				  						<td>
				  							<center><font size="3" color="#fff">Remove</font></center>
				  						</td>
				  					</tr>
								
				  					<tr th:each="job : ${job}" class="job">
				  					
				  						<td   th:text="${job.id}" class="id" ></td>
				  						<td   th:text="${job.title}" class="title" ></td>
				  						<td   th:text="${job.position}" ></td>
				  						<td style="width: 20px;">
				  						
				  						
				  						
				  						
				  						<a href="#" th:href="@{/JobUpdate(id=${job.id})}">
				  							<center>
					  							<button type="submit" class="btn btn-default btn-lg">
	 													<i class="icon-pencil"></i>
												</button>
											</center>
										</a>
				  						</td>
				  						<td style="width:10px;">
				  							<a href="#" th:href="@{/JobStatus(id=${job.id} , status=${job.active})}" class="remove">
				  							<center>
					  							<button type="submit" class="btn btn-default btn-lg">
												<i class="icon-trash" th:if="${job.active == 0}"></i>
												<i class="icon-repeat" th:if="${job.active == 1}"></i>
												</button>
											</center>
										</a>
				  						</td>
				  						<td th:text="${job.active}" class="active" ></td>
				  					</tr>
				  				
							</table>
						
						
					</div>
				</div>
			</section>
			</div>
<div th:include="Pagination :: pagination"></div>		
			<br/>
			<br/>
			<script type="text/javascript">
			$(function(){
				$(".remove").click(function(){
					if (!confirm("Are you sure?")) {
						return false;
					}
				});
				
				page = window.location.href.split("/")
				if (page[page.length - 1] == "JobInactive") {
					$('#isInactive').prop("checked", true);
				}
				
				$('#isInactive').change(function() {
					if ($( this ).is( ':checked' )) {
						window.location.href = 'JobInactive';
					} else {
						window.location.href = 'Job';
					}
				});
			});
		</script>
</body>

</html>